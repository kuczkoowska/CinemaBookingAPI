<!DOCTYPE html>
<html th:replace="~{admin/layout :: layout(~{::content})}" xmlns:th="http://www.thymeleaf.org">
<body>
<div th:fragment="content">
    <h2 class="mt-3">Dodaj Film</h2>

    <form class="mt-4 col-md-6" method="post" th:action="@{/admin/movies}" th:object="${movie}">

        <div class="mb-3">
            <label>Tytuł</label>
            <input class="form-control" th:classappend="${#fields.hasErrors('title')} ? 'is-invalid' : ''"
                   th:field="*{title}"
                   type="text">
            <div class="invalid-feedback" th:errors="*{title}">Błąd</div>
        </div>

        <div class="mb-3">
            <label>Gatunek</label>
            <select class="form-select" th:field="*{genre}">
                <option value="">Wybierz...</option>
                <option th:each="g : ${T(com.projekt.cinemabooking.entity.enums.MovieGenre).values()}"
                        th:text="${g}" th:value="${g}"></option>
            </select>
        </div>

        <div class="col-md-3 mb-3">
            <label class="form-label">Czas (min)</label>
            <input class="form-control" min="1"
                   th:classappend="${#fields.hasErrors('durationMinutes')} ? 'is-invalid' : ''"
                   th:field="*{durationMinutes}" type="number">
            <div class="invalid-feedback" th:errors="*{durationMinutes}">Błąd czasu</div>
        </div>

        <div class="col-md-3 mb-3">
            <label class="form-label">Wiek (PG)</label>
            <input class="form-control" min="0"
                   th:classappend="${#fields.hasErrors('ageRating')} ? 'is-invalid' : ''" th:field="*{ageRating}"
                   type="number">
            <div class="invalid-feedback" th:errors="*{ageRating}">Błąd wieku</div>
        </div>

        <div class="mb-3">
            <label class="form-label">Reżyser</label>
            <input class="form-control" th:classappend="${#fields.hasErrors('director')} ? 'is-invalid' : ''"
                   th:field="*{director}" type="text">
            <div class="invalid-feedback" th:errors="*{director}">Podaj reżysera</div>
        </div>

        <div class="mb-3">
            <label class="form-label">Opis fabuły</label>
            <textarea class="form-control" rows="4"
                      th:classappend="${#fields.hasErrors('description')} ? 'is-invalid' : ''"
                      th:field="*{description}"></textarea>
            <div class="invalid-feedback" th:errors="*{description}">Opis jest wymagany</div>
        </div>

        <div class="mb-3">
            <label class="form-label">Link do plakatu (URL obrazka)</label>
            <input class="form-control" placeholder="https://..."
                   th:classappend="${#fields.hasErrors('posterUrl')} ? 'is-invalid' : ''" th:field="*{posterUrl}"
                   type="text">
            <div class="invalid-feedback" th:errors="*{posterUrl}">Link do plakatu jest wymagany</div>
        </div>

        <div class="mb-3">
            <label class="form-label">Link do zwiastuna (YouTube URL) - opcjonalne</label>
            <input class="form-control" placeholder="https://..." th:field="*{trailerUrl}" type="text">
        </div>

        <button class="btn btn-success" type="submit">Zapisz</button>
        <a class="btn btn-secondary" th:href="@{/admin/movies}">Anuluj</a>
    </form>
</div>
</body>
</html>